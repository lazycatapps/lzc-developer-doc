# 常见问题解答（FAQ）

## 应用程序空白显示问题

懒猫微服在各运行平台上通过创建 Tun 虚拟网络设备实现流量转发功能。 此网络架构设计对开发者本地网络配置较为敏感。

若您的客户端可以正常启动但应用界面呈现空白状态， 建议检查网络配置规则， 确保域名 `*.heiyu.space` 以及 `fc03:1136:3800::/40` 设置为直接连接模式。

备注： 有些工具有特殊模式这个选项， 请关闭 `supervisor` 这个选项， 否则懒猫网盘的`本地应用打开`功能会受影响。

## 网络数据传输机制

### 直连模式

当终端设备所在网络环境具备 IPv6/NAT3 时， 懒猫微服将与用户设备建立直接数据传输连接。 此时客户端状态图标将显示为蓝色， 表示处于直连传输状态。 若终端设备所在网络环境不具备公网 IP 地址， 系统将根据 NAT 网络状况自动提供免费的网络穿透服务。

### 中继服务

在网络环境较为恶劣的情况下， 系统会自动切换至免费的中继数据传输服务。 由于采用端到端加密技术（TLS1.3/noise）， 数据传输内容对包括平台运营团队在内的任何第三方均不可见， 确保用户数据安全性。 中继传输状态下， 客户端状态图标将显示为黄色。

## 网络穿透服务范围

懒猫穿透服务属于系统网络层， 包括官方应用在内的所有应用都会自动支持， 范围包括：

- 平台应用商店上架的所有应用
- 开发者自主开发的应用程序
- 开发者搭建的虚拟机

该服务确保用户能够在全球范围内便捷访问微服云计算服务。

## VPN 共存解决方案
懒猫微服在所有平台(包括移动端)均只转发 `fc03:1136:3800::/40` 这个私有网段地址， 并依赖公共 DNS 对 `*.heiyu.space` 的正常解析。

用户安装第三方 VPN 有可能会对微服的正常访问产生影响， 下面是各平台的双 VPN 共存解决方案：

### Android 平台
安卓平台可通过 [Shelter](https://github.com/PeterCxy/Shelter) 方案， 通过双开工作区的原理来实现 VPN 双开。

建议懒猫微服放置在‘个人’工作区， 方便同步手机文件到微服， 其他 VPN 建议放置在‘工作’工作区， 同时把浏览器也放置在‘工作’工作区下， 方便访问互联网资料。

### iOS 平台

iOS 平台可以让懒猫微服用企业 VPN， 您个人的 VPN 采用 IPSec/IKEv2 的协议， 放置在 iOS 的个人 VPN 下即可实现 VPN 双开， 个人 VPN 文档配置请参考[苹果的官方文档](https://developer.apple.com/documentation/networkextension/personal_vpn)

PS: 但个人 VPN 需要有开发者权限， 且 VPN 需要单独申请权限， 具备很高门槛。 我们正在尝试通过其他方式解决 ios 下与其他 VPN 共享的需求。

### PC 平台
PC 平台如果您使用客户端访问应用， 不需要任何处理。

PC 平台如果您使用浏览器访问应用， 并且开启了第三方 VPN 服务， 请确保第三方 VPN 放行了域名 `*.heiyu.space` 以及 `fc03:1136:3800::/40`。

## 从其他平台迁移应用数据到懒猫微服

懒猫微服主要目标客户是非技术用户， 因此默认不开放系统权限。

如果您需要自行处理应用， 可以单独申请系统开发者权限， 权限通过后， 您可以直接使用
`ssh root@$微服名称.heiyu.space` 登录到微服系统。

并进入 /data/app/var/$appid 下进行数据迁移工作。 迁移前请在`应用管理`中停止相关应用。

此目录结构属于系统内部接口， 会随着系统功能变化而变化， 相关说明在/data/README.md 下有说明(lzcos v1.0.19+后)

ssh 权限使用有极高风险， 请务必小心。
