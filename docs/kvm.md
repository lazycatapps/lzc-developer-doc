# KVM 模式

## KVM 虚拟机的优势
前面几章讲的都是基于 Docker 模式下的应用开发细节和技巧。

其实在日常的学习研究中， 我们大部分时间并不是在开发应用， 而是在做技术实验。

这时候， KVM 模式就要比 Docker 模式更加灵活方便：
1. 折腾简单： KVM 并不像 Docker 有那么多限制， 折腾起来更像公有云服务器
2. 网络穿透： KVM 直接可以利用懒猫微服的网络穿透能力， 在 KVM 起一些实验的服务， 外网马上可以访问到
3. 云端虚拟化： 可以虚拟化 ArchLinux、 Windows 等不同的系统， 可以在云端跑迅雷、 QQ 等 Windows 软件， 不管作为云电脑办公还是环境测试， 都是很方便的

从使用体感来说， KVM 模式更像公有云服务器的操作手感， 唯一不一样的是， 懒猫微服的硬件计算资源和网络资源是独占的， 不受公有云高峰期的资源限制。

## 虚拟机和开发库安装
使用方法举例， 我们以 ArchLinux 为例：
1. 首先要安装 ArchLinux 虚拟机， 请参考[攻略](https://lazycat.cloud/playground/%2Fguideline%2F423)
2. 在虚拟机中用包管理器安装对应的开发库， 可使用 pacman 或 aur
3. 编写后台服务脚本并启动, 后台服务可以依托于微服的网络穿透， 对外网提供服务

## 对外访问端口
目前开放的端口有 10086/TCP, 25565/TCP, 10087/UDP, 9987/UDP， 后台服务可以利用这 4 个端口进行通讯服务。

## 外网服务连接方式
ArchLinux 应用的子域名是 archlinux， 假设您的设备名为 devicename, 对外的 TCP 端口为 10086， 您就可以通过访问 archlinux.devicename.heiyu.space:10086 来访问对外提供的 TCP 服务啦。

## 端口开放计划
后续， 我们将会升级微服系统， 使得虚拟机所有端口都可以对外提供服务， 去掉端口限制。